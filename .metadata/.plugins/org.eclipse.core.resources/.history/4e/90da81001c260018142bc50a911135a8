#include "LPC17xx.h"
#include "timer.h"

#define TIMER_ON 1
#define TIMER_OFF 2

void TIMER0_Init(unsigned int frequency){
	LPC_TIM0->TCR = TIMER_OFF;
	VPBDIV->VPB_RATE = 1;
	TIMER0->PR = ((CLK / frequency) - 1) / 1000;
	TIMER0->MCR = 0;
	TIMER0->EMR = 0;
	TIMER0->CTCR = 0;
	TIMER0->TCR = TIMER_ON;
}

unsigned int TIMER0_GetValue(void){
	return TIMER0->TC;
}

unsigned int TIMER0_Elapse(unsigned int lastRead){
	return TIMER0->TC - lastRead;
}
